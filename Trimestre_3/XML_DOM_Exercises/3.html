<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ejercicio 3 - Libros XML</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }
    th, td {
      border: 1px solid #aaa;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #ddd;
    }
  </style>
</head>
<body>
  <h1>üìö Ejercicio 3 - An√°lisis de libros</h1>
  <div id="resultados"></div>
  <div id="tabla"></div>

  <script>
    const xhttp = new XMLHttpRequest();
    xhttp.onload = function () {
      const xmlDoc = this.responseXML;
      const books = xmlDoc.getElementsByTagName("book");

      const resultados = [];

      // 1. T√≠tulo del primer libro
      resultados.push("üìò T√≠tulo del primer libro: " + books[0].getElementsByTagName("title")[0].textContent);

      // 2. Todos los t√≠tulos
      let allTitles = "";
      for (let i = 0; i < books.length; i++) {
        allTitles += "‚Ä¢ " + books[i].getElementsByTagName("title")[0].textContent + "<br>";
      }
      resultados.push("<strong>üìö Todos los t√≠tulos:</strong><br>" + allTitles);

      // 3. N√∫mero de atributos del cuarto libro
      resultados.push("üî¢ N√∫mero de atributos del cuarto libro: " + books[3].attributes.length);

      // 4. Valor de los atributos del cuarto libro
      let attrs = "";
      for (let i = 0; i < books[3].attributes.length; i++) {
        attrs += books[3].attributes[i].name + " = " + books[3].attributes[i].value + "<br>";
      }
      resultados.push("<strong>üßæ Atributos del cuarto libro:</strong><br>" + attrs);

      // 5. N√∫mero de autores del tercer libro
      const autores3 = books[2].getElementsByTagName("author");
      resultados.push("üë• N√∫mero de autores del tercer libro: " + autores3.length);

      // 6. Autores del tercer libro
      let autoresLista = "";
      for (let i = 0; i < autores3.length; i++) {
        autoresLista += "‚Ä¢ " + autores3[i].textContent + "<br>";
      }
      resultados.push("<strong>‚úçÔ∏è Autores del tercer libro:</strong><br>" + autoresLista);

      // Mostrar resultados
      document.getElementById("resultados").innerHTML = resultados.join("<hr>");

      // 7. Tabla con t√≠tulo, primer autor, precio y a√±o
      let tablaHTML = "<h2>üìä Tabla de libros</h2><table>";
      tablaHTML += "<tr><th>T√≠tulo</th><th>Primer Autor</th><th>Precio</th><th>A√±o</th></tr>";

      for (let i = 0; i < books.length; i++) {
        const title = books[i].getElementsByTagName("title")[0]?.textContent || "-";
        const author = books[i].getElementsByTagName("author")[0]?.textContent || "-";
        const price = books[i].getElementsByTagName("price")[0]?.textContent || "-";
        const year = books[i].getElementsByTagName("year")[0]?.textContent || "-";

        tablaHTML += `<tr><td>${title}</td><td>${author}</td><td>${price}</td><td>${year}</td></tr>`;
      }

      tablaHTML += "</table>";
      document.getElementById("tabla").innerHTML = tablaHTML;
    };

    xhttp.open("GET", "https://www.w3schools.com/xml/books.xml", true);
    xhttp.send();
  </script>
</body>
</html>
